jQuery(function(t){var i={init:function(){t(".user-registration-frontend-listing-container").each(function(){i.handle_advanced_filter(t(this)),i.handle_user_details(t(this))})},handle_user_details:function(n){var e=n.attr("id").replace("user-registration-frontend-listing-",""),r=n.find(".user-registration-frontend-listing-pagination-group").find(".active").attr("id"),s={action:"user_registration_frontend_listing_user_data",security:user_registration_frontend_listings_frontend_script_data.ur_frontend_listing_user_data_security,list_id:e,page:void 0!==r?r.replace("user-registration-frontend-listing-",""):1,amount_filter:n.find("#user-registration-frontend-listing-amount-filter").val(),sort_by:n.find("#user-registration-frontend-listing-sort-by").val(),view_user_url:window.location.href.split("?")[0],search_param:n.find("#user-registration-frontend-listing-search-field").val()};n.find('input[name="search_user_profiles"').on("click",function(e){e.preventDefault();var r=t(this).siblings("#user-registration-frontend-listing-search-field").val();s.search_param=""!==r?r:"",s.page=1,i.parse_ajax(n,s)}),t(document).ready(function(){i.parse_ajax(n,s)}),n.find("#user-registration-frontend-listing-amount-filter").on("change",function(){s.amount_filter=t(this).val(),s.page=1,i.parse_ajax(n,s)}),n.find("#user-registration-frontend-listing-sort-by").on("change",function(){s.sort_by=t(this).val(),i.parse_ajax(n,s)}),n.find(".ur-frontend-listing-advance-filter-apply").on("click",function(){t(this).closest(".frontend-listing-title-settings").find(".ur-frontend-listing-filter-info-wrapper").remove(),s.advanced_filter=i.get_advanced_filter(t(this)),t(this).closest(".ur-advance-setting-container").toggle(),i.parse_ajax(n,s)}),t(document.body).on("click",".ur-frontend-listing-dismiss-filter, .ur-advance-setting-reset",function(){"all-filter"===t(this).data("id")?t(this).closest(".frontend-listing-title-settings").find(".ur-frontend-listing-advance-filter-wrapper").find(".ur-advance-settings-list").find("input").val(""):t(this).closest(".frontend-listing-title-settings").find(".ur-frontend-listing-advance-filter-wrapper").find('input[name="'+t(this).data("id")+'"]').val(""),s.advanced_filter=i.get_advanced_filter(t(this)),t(this).closest(".ur-frontend-listing-filter-info-wrapper").find("button.ur-fl-dismiss-single-filter").length<2&&t(this).closest(".ur-frontend-listing-filter-info-wrapper").find("button").remove(),t(this).hasClass("ur-frontend-listing-dismiss-filter")&&t(this).parent().remove(),i.parse_ajax(n,s)})},parse_ajax:function(i,n){i.find(".lds-dual-ring").length<1&&t('<div class="lds-dual-ring"></div>').insertBefore(i.find(".user-registration-frontend-listing-body")),i.find(".user-registration-frontend-listing-body").html(""),t.ajax({url:user_registration_frontend_listings_frontend_script_data.ajax_url,data:n,type:"POST",success:function(n){var e=n.success,r=n.data.profile_cards,s=n.data.pagination_template,a=n.data.displayed_users,o=n.data.total_users;if(e){i.find(".user-registration-frontend-listing-body").html(r),i.find(".user-registration-frontend-listing-footer").html(s);var l=user_registration_frontend_listings_frontend_script_data.ur_frontend_listing_filtered_user_message.replace("%qty%",a).replace("%total%",o);i.find(".ur-frontend-count").html(l),t(document).trigger("user_registration_frontend_user_listing_loaded",i),i.find(".user-registration-frontend-listing-page").length<=3&&i.find(".user-registration-frontend-listing-pagination-group").remove()}else i.find(".user-registration-frontend-listing-body").html("<div class='user-registration-error user-registration-frontend-listing-error' >"+n.data.message+"</div>"),i.find(".ur-frontend-count").html(""),i.find(".user-registration-frontend-listing-pagination-group").remove();t(".lds-dual-ring").remove()}})},handle_advanced_filter:function(i){t(".ur-frontend-advance-filter-open").on("click",function(){t(this).closest(".frontend-listing-title-settings").find(".ur-frontend-listing-advance-filter-wrapper").toggle(),t(this).closest(".frontend-listing-title-settings").find(".ur-frontend-listing-filter-info-wrapper").remove()})},get_advanced_filter:function(i){var n={},e="";return i.closest(".frontend-listing-title-settings").find(".ur-frontend-listing-filter-info-wrapper").length<1&&(e+='<div class="ur-frontend-listing-filter-info-wrapper">'),i.closest(".frontend-listing-title-settings").find(".ur-frontend-listing-advance-filter-wrapper").find(".ur-advance-settings-list").each(function(){var i=t(this).find("input");""!==i.val()&&(n[i.attr("name").replace("ur_frontend_listing_","")]=i.val(),e+='<button class="ur-fl-dismiss-single-filter" style="cursor:not-allowed;">',e+="<strong>"+t(this).find("label").html()+": </strong>&nbsp;"+i.val(),e+='<span class="dashicons dashicons-dismiss ur-frontend-listing-dismiss-filter" data-id="'+i.attr("name")+'" style="margin-left: 5px; margin-right: 5px;"></span>',e+="</button>")}),Object.keys(n).length>0&&(e+='<button class="ur-frontend-listing-dismiss-filter" data-id="all-filter" >Clear All</button>',i.closest(".frontend-listing-title-settings").find(".ur-frontend-listing-filter-info-wrapper").length<1?(e+="</div>",i.closest(".frontend-listing-title-settings").append(e)):i.closest(".frontend-listing-title-settings").find(".ur-frontend-listing-filter-info-wrapper").html(e)),n}};i.init(),t(document).on("user_registration_frontend_user_listing_loaded",function(n,e){t(e).find(".user-registration-frontend-listing-page").on("click",function(){var n=t(this).closest(".user-registration-frontend-listing-pagination-group").find(".active");t(e).find(".user-registration-frontend-listing-page").removeClass("active");var r=t(this).attr("id").replace("user-registration-frontend-listing-","");if(!t.isNumeric(r)){var s=n.next(),a=n.prev();r="next-page"===r&&"next-page"!==s.attr("id").replace("user-registration-frontend-listing-","")?s.attr("id").replace("user-registration-frontend-listing-",""):"previous-page"===r&&"previous-page"!==a.attr("id").replace("user-registration-frontend-listing-","")?a.attr("id").replace("user-registration-frontend-listing-",""):1}t(this).closest(".user-registration-frontend-listing-pagination-group").find("#user-registration-frontend-listing-"+r).addClass("active"),t(window).scrollTop(t(this).closest(".user-registration-frontend-listing-container").offset().top),i.handle_user_details(t(e))})})});