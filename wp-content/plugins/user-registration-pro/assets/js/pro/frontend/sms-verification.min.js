"use strict";!function(e){var s={init:function(){s.init_triggers(),s.init_render()},init_triggers:function(){e("#user-registration-sms-verification-otp-submit-btn").on("click",function(e){e.preventDefault(),e.stopPropagation(),s.submit()}),e("#user-registration-sms-verification-otp-field").on("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),s.submit())}),e("#user-registration-sms-verification-otp-resend-btn").on("click",function(e){e.preventDefault(),e.stopPropagation(),s.resend_otp()})},init_render:function(){s.show_message(user_registration_sms_verification_parameters.otp_sent_message,"user-registration-message")},show_message:function(s,r){var i=e("<li></li>");""===r&&(r="user-registration-info"),i.html(s),e("#user-registration-sms-verification-message-container").removeClass().addClass(r).empty().append(i)},submit:function(){var r=e("#user-registration-sms-verification-spinner").addClass("ur-front-spinner"),i=e("#user-registration-sms-verification-otp-field").val(),t=e("#user-registration-sms-verification-validate-otp-redirect").val();if(!i.length)return s.show_message(user_registration_sms_verification_parameters.otp_empty_message,"user-registration-error"),void r.removeClass("ur-front-spinner");var a=e("#user-registration-sms-verification-otp-submit-btn").prop("disabled",!0),n=(e("#user-registration-sms-verification-otp-resend-btn").attr("disabled",!0),new URLSearchParams(window.location.search));e.ajax({type:"POST",url:user_registration_sms_verification_parameters.ajax_url,data:{action:user_registration_sms_verification_parameters.sms_otp_submit_action,security:user_registration_sms_verification_parameters.sms_otp_submit_nonce,otp_code:i,redirect_on_login:t,user_id:user_registration_sms_verification_parameters.user_id,remember_me:n.get("remember_me")},success:function(e){1==e.success?e.data.redirect&&(s.show_message(e.data.message,"user-registration-message"),window.location.replace(e.data.redirect)):(s.show_message(e.data.message,"user-registration-error"),a.prop("disabled",!1)),r.removeClass("ur-front-spinner"),s.render_values()},dataType:"json"})},resend_otp:function(){var r=e("#user-registration-sms-verification-otp-resend-btn").prop("disabled",!0);e.ajax({type:"POST",url:user_registration_sms_verification_parameters.ajax_url,action:user_registration_sms_verification_parameters.sms_otp_resend_action,data:{action:user_registration_sms_verification_parameters.sms_otp_resend_action,security:user_registration_sms_verification_parameters.sms_otp_resend_nonce,user_id:user_registration_sms_verification_parameters.user_id},success:function(e){e.success?s.show_message(e.data.message,"user-registration-message"):s.show_message(e.data.message,"user-registration-error"),r.prop("disabled",!1)},dataType:"json"})},hold_user_login:function(){e("#user-registration-sms-verification-otp-field").prop("disabled",!0),e("#user-registration-sms-verification-otp-resend-btn").prop("disabled",!0),e("#user-registration-sms-verification-otp-submit-btn").prop("disabled",!0),s.redirect_to_login_page()},redirect_to_login_page:function(e){user_registration_sms_verification_parameters.login_page_url&&setTimeout(function(){s.show_message("Redirecting to login page . . .","user-registration-info"),window.location.replace(user_registration_sms_verification_parameters.login_page_url)},1e3*e)}};e(document).ready(function(){s.init()})}(jQuery);