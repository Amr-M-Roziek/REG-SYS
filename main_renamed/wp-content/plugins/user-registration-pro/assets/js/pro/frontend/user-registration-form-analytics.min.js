!function(n,a){var t={data:{formId:0,userJourney:{loadTime:null},formAbandonment:{formActivated:null,formSubmitted:null}},init:function(){},ready:function(){t.setTrackingId(),t.setFormId(),t.startUserJourney(),"undefined"!=typeof a.track_form_abandonment&&a.track_form_abandonment&&t.startFormAbandonmentCapture()},setFormId:function(){var a=n(".user-registration form");a.length&&(t.data.formId=a.data("form-id"))},setTrackingId:function(){var n="";if(!document.cookie.split(";").some(function(a){return!!a.trim().startsWith("ur_fa_tracking_id=")&&(n=a.split("=")[1],!0)})){var a=new Date;a.setDate(a.getDate()+100);n=Math.floor(Math.random()*Date.now()).toString(36)+Math.floor(Math.random()*Date.now()).toString(36);var t=encodeURIComponent("ur_fa_tracking_id")+"="+encodeURIComponent(n)+"; expires="+a.toUTCString()+"; path=/";document.cookie=t}},startUserJourney:function(){t.data.userJourney.loadTime=Date.now(),n(window).on("beforeunload",function(){var e=Math.floor((Date.now()-t.data.userJourney.loadTime)/1e3),o="undefined"!==t.data.formAbandonment.formSubmitted&&t.data.formAbandonment.formSubmitted,r={user_session_duration:e,form_submitted:o,form_abandoned:"undefined"!==t.data.formAbandonment.formActivated&&(t.data.formAbandonment.formActivated&&!o),form_id:t.data.formId,referer:a.referer_page};n.ajax({url:a.ajax_url,type:"POST",data:{action:"ur_save_user_post_view",data:r,_wpnonce:a.save_visited_nonce}})})},startFormAbandonmentCapture:function(){n(".ur-field-item *").on("focus change",function(){null==t.data.formAbandonment.formActivated&&(t.data.formAbandonment.formActivated=!0)}),n("form.register").on("submit",function(){t.data.formAbandonment.formSubmitted=!0}),n(window).on("user_registration_frontend_after_ajax_complete",function(n,a,e,o){t.data.formAbandonment.formSubmitted=!0}),n(window).on("beforeunload",function(){"undefined"!=typeof a.save_abandoned_value&&a.save_abandoned_value&&t.processAndSendAbandonedEntry()})},processAndSendAbandonedEntry:function(){if(null===t.data.formAbandonment.formSubmitted&&t.data.formAbandonment.formActivated){var e=t.getAbandonedFormData();e.push({name:"action",value:"ur_save_abandoned_data"},{name:"_wpnonce",value:a.save_abandoned_data_nonce}),n.ajax({url:a.ajax_url,type:"POST",data:e})}},getAbandonedFormData:function(){var a=n("form.register");return!!a.length&&a.serializeArray()}};t.init(),n(document).ready(t.ready)}(jQuery,urFormAnalyticsl10n);