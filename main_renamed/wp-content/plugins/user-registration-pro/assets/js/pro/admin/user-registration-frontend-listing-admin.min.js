jQuery(function(e){var t={init:function(){this.general_initialization(),this.handle_general_options(),this.handle_filter_options(),this.handle_pagination_options(),this.handle_advanced_filter_options(),this.handle_advanced_filters(),this.handle_user_fields()},general_initialization:function(){e(".multiple-select").select2(),e(".multiple-select").select2({dropdownAutoWidth:!0,containerCss:{display:"block"},width:"20%"})},handle_general_options:function(){var i=e("#user_registration_frontend_listings_view_profile"),n=e(".user_registration_frontend_listings_card_fields_field"),s=e(".user_registration_frontend_listings_view_profile_button_text_field ");t.settings_fields_toggler(i,n),i.on("change",function(){t.settings_fields_toggler(e(this),n)}),t.settings_fields_toggler(i,s),i.on("change",function(){t.settings_fields_toggler(e(this),s)})},handle_filter_options:function(){var i=e("#user_registration_frontend_listings_search_form"),n=e(".user_registration_frontend_listings_search_fields_field"),s=e("#user_registration_frontend_listings_sort_by"),r=e(".user_registration_frontend_listings_default_sorter_field"),_=e("#user_registration_frontend_listings_ur_only"),l=e(".user_registration_frontend_listings_ur_forms_field ");t.settings_fields_toggler(i,n),t.settings_fields_toggler(s,r),t.settings_fields_toggler(_,l),i.on("change",function(){t.settings_fields_toggler(e(this),n)}),s.on("change",function(){t.settings_fields_toggler(e(this),r)}),_.on("change",function(){t.settings_fields_toggler(e(this),l)})},handle_pagination_options:function(){var i=e("#user_registration_frontend_listings_amount_filter"),n=e(".user_registration_frontend_listings_default_page_filter_field"),s=e(".user_registration_frontend_listings_filtered_user_message_field");t.settings_fields_toggler(i,n),i.on("change",function(){t.settings_fields_toggler(e(this),n)}),t.settings_fields_toggler(i,s),i.on("change",function(){t.settings_fields_toggler(e(this),s)})},handle_advanced_filter_options:function(){var i=e("#user_registration_frontend_listings_advanced_filter"),n=e(".user_registration_frontend_listings_advanced_filter_fields_field");t.settings_fields_toggler(i,n),i.on("change",function(){t.settings_fields_toggler(e(this),n)})},settings_fields_toggler:function(e,t){e.is(":checked")?t.show():t.hide()},handle_advanced_filters:function(){var t=!1;e("#user_registration_frontend_listings_advanced_filter_fields_selector").focusout(function(){t=!1}),e("#user_registration_frontend_listings_advanced_filter_fields_selector").on("click",function(i){if(i.preventDefault(),t){var n=user_registration_frontend_listing_admin_script_data.ur_frontend_listing_advanced_filter_options,s=e(".user_registration_frontend_listings_advanced_filter_fields_container").length+1,r='<div class="user_registration_frontend_listings_advanced_filter_fields_container selected-options">';r+='<div class="ur-draggable-option">',r+='<div class="selected-option-container">',r+='<svg width="12" height="20" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="4" height="4" fill="#4C5477"></rect><rect x="8" width="4" height="4" fill="#4C5477"></rect><rect y="16" width="4" height="4" fill="#4C5477"></rect><rect x="8" y="16" width="4" height="4" fill="#4C5477"></rect><rect y="8" width="4" height="4" fill="#4C5477"></rect><rect x="8" y="8" width="4" height="4" fill="#4C5477"></rect></svg>',r+='<select id="user_registration_frontend_listings_advanced_filter_fields_'+s+'" class="user_registration_frontend_listings_advanced_filter_fields_map ur-selected ur-input-group">';for(var _ in n){r+='<option value="'+_+'" '+(e(this).val()===_?"selected":"")+">"+n[_]+"</option>"}r+="</select>",r+="</div>",r+='<span class="user_registration_frontend_listings_advanced_filter_fields_remove delete-option"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-trash-2" viewBox="0 0 24 24"><path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2m-6 5v6m4-6v6"></path></svg></span>',r+="</div>",e(r+="</div>").prependTo(e(this).parent().find(".user_registration_frontend_listings_advanced_filter_fields_list")),e(this).closest(".ur-metabox-field-detail").trigger("change"),e(this).closest(".ur-metabox-field-detail").find("#user_registration_frontend_listings_advanced_filter_fields_"+s).trigger("change")}t=!t}),e(document.body).on("click",".user_registration_frontend_listings_advanced_filter_fields_remove",function(t){t.preventDefault();var i=e(this),n=i.closest(".ur-metabox-field-detail");i.parent().remove(),n.trigger("change")}),e(".ur-metabox-field-detail").on("change",function(){if(e(this).find("#user_registration_frontend_listings_advanced_filter_fields_selector").length>0){var t={};e(this).find(".user_registration_frontend_listings_advanced_filter_fields_map").each(function(){"DIV"!==e(this).get(0).tagName?t[e(this).val()]=e(this).find("option:selected").text():t[e(document.body).find("#"+e(this).attr("id")+"_meta_key").val()]=e(document.body).find("#"+e(this).attr("id")+"_meta_label").val()}),e("#user_registration_frontend_listings_advanced_filter_fields").attr("value",JSON.stringify(t))}}),e(document.body).on("change",".user_registration_frontend_listings_advanced_filter_fields_map",function(){if("other"===e(this).val()){var t='<div class="'+e(this).attr("class")+'" id="'+e(this).attr("id")+'">';t+='<input type="text" id="'+e(this).attr("id")+'_meta_label" class="user-registration-frontend-listing-advance-filter-meta-mapper ur-select custom-input" placeholder="Field Label">',t+='<input type="text" id="'+e(this).attr("id")+'_meta_key" class="user-registration-frontend-listing-advance-filter-meta-mapper ur-select custom-input" placeholder="Meta Key ( eg. meta_key_123, meta_key_456 )">',e(t+="</div>").insertBefore(e(this)),e(this).remove()}}),e(document.body).on("change",".user-registration-frontend-listing-advance-filter-meta-mapper",function(){e(this).closest(".ur-metabox-field-detail").trigger("change")}),e("#user_registration_frontend_listings_allow_guest").is(":checked")?e(".user_registration_frontend_listings_access_denied_text_field ").hide():e(".user_registration_frontend_listings_access_denied_text_field ").show(),e(document).on("change","#user_registration_frontend_listings_allow_guest",function(t){t.preventDefault(),e(this).is(":checked")?e(".user_registration_frontend_listings_access_denied_text_field ").hide():e(".user_registration_frontend_listings_access_denied_text_field ").show()}),e(document).ready(function(){"1"===e("#user_registration_frontend_listings_layout").val()?e(".user_registration_frontend_listings_lists_fields_field ").hide():e(".user_registration_frontend_listings_lists_fields_field").show()}),e(document).on("change","#user_registration_frontend_listings_layout",function(t){t.preventDefault(),"1"===e(this).val()?e(".user_registration_frontend_listings_lists_fields_field ").hide():e(".user_registration_frontend_listings_lists_fields_field").show()}),"undefined"!=typeof e.fn.sortable&&e(".user_registration_frontend_listings_advanced_filter_fields_list").sortable({containment:".user_registration_frontend_listings_advanced_filter_fields_list",tolerance:"pointer",revert:"invalid",forceHelperSize:!0,stop:function(t,i){e(".ur-metabox-field-detail").trigger("change")}})},handle_user_fields:function(){e(".user_registration_frontend_listings_ur_forms_field").find("select").on("change",function(){var t=e(this).val();e.ajax({url:user_registration_frontend_listing_admin_script_data.ajax_url,type:"POST",data:{action:"user_registration_frontend_listing_display_user_fields",form_ids:t},success:function(t){!0===t.success&&(e(".user_registration_frontend_listings_lists_fields_field select").empty(),e(".user_registration_frontend_listings_card_fields_field select").empty(),e.each(t.data,function(t,i){var n="";n+='<optgroup label="'+i.form_label+'">',e.each(i.field_list,function(e,t){n+='<option value="'+e+'">'+t+"</option>"}),n+="</optgroup>",e(".user_registration_frontend_listings_lists_fields_field select").append(n),e(".user_registration_frontend_listings_card_fields_field select").append(n)}))}})})}};t.init()});