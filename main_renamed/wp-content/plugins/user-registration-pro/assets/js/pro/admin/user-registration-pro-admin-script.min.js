jQuery(function(e){var t={init:function(){this.initalize_form_reset_settings(),this.initalize_blacklist_words_form_settings(),this.initalize_whitelist_domain_settings(),this.initalize_form_auto_password_generation_settings(),this.initialize_conditional_logic_settings(),this.initialize_extension_page(),this.initialize_external_fields_mapping(),this.init_all_tooltips(),this.manage_tooltip_fields(),this.init_export_custom_fields(),this.init_render_dynamic_form_fields(),this.init_integration_settings(),this.init_hide_show_redirection_settings(),this.init_hide_show_role_based_redirection_settings(),this.initalize_email_blocking_settings(),this.init_general_field_settings(),this.init_slot_booking(),this.image_choice_uploader(),this.trigger_image_captcha_settings(),this.disable_users(),this.misc_settings(),e("#user_registration_form_setting_enable_blacklist_words").on("click",this.initalize_blacklist_words_form_settings)},init_general_field_settings:function(){e(document).on("ur_new_field_created",function(t,i){var n=i.fieldName;e(".ur-grid-lists .ur-selected-item").find("[name='"+n+"'").find(".ur-captcha-question").hide(),e(".ur-grid-lists .ur-selected-item").find("[name='"+n+"'").find(".ur-captcha-image-label").hide(),e(".ur-grid-lists .ur-selected-item").find("[name='"+n+"'").find(".ur-captcha-image-icons-group").hide()}),e('select[data-field="captcha_format"]').each(function(){"math"==e(this).val()?(e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-equation").show(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-question").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-label").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-icons-group").hide()):"qa"==e(this).val()?(e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-equation").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-question").show(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-label").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-icons-group").hide()):(e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-equation").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-question").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find("#ur-input-type-captcha-math").hide(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-label").show(),e(this).closest(".ur-selected-item").find(".ur-field").find(".ur-captcha-image-icons-group").show())}),e(document).on("ur_general_field_settings_to_update_form_fields_in_builder",function(i,n){switch(n.attr("data-field")){case"default_value":n.on("change",function(){"default_value"===n.attr("data-field")&&n.closest(".ur-general-setting-block").hasClass("ur-general-setting-captcha-question")&&t.render_captcha_question(e(this))});break;case"options":n.on("keyup",function(){n.closest(".ur-general-setting-block").hasClass("ur-general-setting-captcha-question")&&t.render_captcha_question(n)});break;case"captcha_format":"math"===n.val()?(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").hide(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):"qa"===n.val()?(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").show(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").hide(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").show()),n.on("change",function(){var i=n.val();"math"===i?(e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-options").hide(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):"qa"===i?(e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-options").show(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):(e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-options").hide(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").show()),t.trigger_general_setting_captcha_format(n)}),n.on("change",function(){"math"===n.val()?(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").hide(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):"qa"===n.val()?(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").show(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").hide()):(n.closest(".ur-general-setting-block").find(".ur-general-setting-options").hide(),n.closest(".ur-general-setting-block").find(".ur-general-setting-image-captcha-options").show())});break;case"image_choice":n.is(":checked")?(n.closest(".ur-general-setting-block").find(".ur-image-choice-wrapper").show(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-image-choice-wrapper").show()):(n.closest(".ur-general-setting-block").find(".ur-image-choice-wrapper").hide(),e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find(".ur-image-choice-wrapper").hide()),n.on("change",function(){t.trigger_general_setting_image_choice(e(this))})}}),e(document).on("ur_sync_textarea_field_settings_in_selected_field_of_form_builder",function(e,i,n){switch(i.attr("data-field-key")){case"captcha":t.render_captcha_question(n)}})},trigger_general_setting_captcha_format:function(t){var i=e(".ur-selected-item.ur-item-active"),n=e.trim(t.val());i.find(".ur-general-setting-captcha-format select option").prop("selected",!1),i.find('.ur-general-setting-captcha-format select option[value="'+n+'"]').prop("selected",!0),"math"===n?(i.find(".ur-field").find(".ur-captcha-question").hide(),i.find(".ur-field").find(".ur-captcha-equation").show(),i.find(".ur-field").find("#ur-input-type-captcha-math").show(),i.find(".ur-field").find(".ur-captcha-image-label").hide(),i.find(".ur-field").find(".ur-captcha-image-icons-group").hide()):"qa"===n?(i.find(".ur-field").find(".ur-captcha-equation").hide(),i.find(".ur-field").find(".ur-captcha-question").show(),i.find(".ur-field").find("#ur-input-type-captcha-math").show(),i.find(".ur-field").find(".ur-captcha-image-label").hide(),i.find(".ur-field").find(".ur-captcha-image-icons-group").hide()):(i.find(".ur-field").find(".ur-captcha-equation").hide(),i.find(".ur-field").find(".ur-captcha-question").hide(),i.find(".ur-field").find("#ur-input-type-captcha-math").hide(),i.find(".ur-field").find(".ur-captcha-image-label").show(),i.find(".ur-field").find(".ur-captcha-image-icons-group").show())},trigger_general_setting_image_choice:function(t){var i=e(".ur-selected-item.ur-item-active");i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked")),t.is(":checked")?(t.closest(".ur-general-setting-block").find(".ur-image-choice-wrapper").show(),i.find(".ur-general-setting-block").find(".ur-image-choice-wrapper").show(),i.find(".ur-admin-template").find(".ur-field").addClass("user-registration-image-options"),i.find(".ur-admin-template .user-registration-image-choice img").each(function(){e(this).show()})):(t.closest(".ur-general-setting-block").find(".ur-image-choice-wrapper").hide(),i.find(".ur-general-setting-block").find(".ur-image-choice-wrapper").hide(),i.find(".ur-admin-template").find(".ur-field").removeClass("user-registration-image-options"),i.find(".ur-admin-template .user-registration-image-choice img").each(function(){e(this).hide()}))},render_captcha_question:function(t){var i=[];t.closest("ul").find("li").each(function(t,n){var r=e(n).find("input.ur-type-captcha-question").val(),s=e(n).find("input.ur-type-captcha-answer").val();r=r.trim(),s=s.trim(),i.every(function(e){return e.question!==r})&&i.push({question:r,answer:s})});var n=e(".ur-selected-item.ur-item-active").find(".ur-field");n.html("");for(var r=0;r<i.length;r++)""!==i[r]&&n.append('<label><input value="'+i[r].question.trim()+'" type="text"  disabled>'+i[r].question.trim()+"</label>")},render_image_captcha_tag:function(t){var i=t.attr("name");e(".ur-selected-item.ur-item-active").find(".ur-general-setting-captcha").find(".ur-general-setting-image-captcha-options").find('input[name="'+i+'"]').val(t.val())},render_image_captcha_radio:function(t){var i=t.attr("name"),n=t.val(),r=t.closest(".ur-general-setting-image-captcha-options").siblings(".ur-general-setting-field-name").find("input[data-field='field_name']").val();t.closest(".icons-group").find(".ur-captcha-icon-radio").each(function(){e(this).removeAttr("checked")}),t.prop("checked",!0);var s=e(".ur-selected-item.ur-item-active").find('.ur-general-setting-field-name input[value="'+r+'"]').closest(".ur-general-setting-field-name").siblings(".ur-general-setting-image-captcha-options");s.find('.ur-captcha-icon-radio[name="'+i+'"]').closest(".icons-group").find(".ur-captcha-icon-radio").each(function(){e(this).removeAttr("checked")}),s.find('input[name="'+i+'"][value="'+n+'"]').prop("checked",!0)},init_integration_settings:function(){e(".ur-integration-connected-accounts").each(function(){e(this).closest(".user-registration-card").find(".integration-status").addClass("ur-integration-account-connected")})},init_all_tooltips:function(){var t={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,t){var i=jQuery(t.origin).attr("data-tip");i&&e.content(i)}};e(".user-registration-help-tip").tooltipster(t)},initialize_external_fields_mapping:function(){e(document).ready(function(){e(document).on("user_registration_admin_before_form_submit",function(e,i){var n=t.save_external_mapping_settings();n.length>0&&(i.data.ur_pro_external_mapping_settings=n)}),t.hide_show_external_fields_mapping(),e(document).on("change","#user_registration_enable_external_fields_mapping_field",function(){t.hide_show_external_fields_mapping()}),e(document).on("change",".ur-pro-db-table-section",function(){t.hide_show_external_table_selection()});user_registration_pro_admin_script_data.ur_pro_form_fields;e(document).on("click",".ur-pro-external-field-map-group .add",function(){var i=e(this).closest(".ur-pro-field-mapping-box").attr("data-last-key"),n='<li class="ur-pro-external-field-map-group" data-key="'+ ++i+'">';n+='<div class="ur-pro-external-field-map-form-group">',n+='<select class="ur-pro-fields ur-pro-field-map-select" name="ur_pro_external_map_form_fields['+i+']">',n+='<option value="">-- Select Field --</option>',n+=t.get_fields_list(),n+="</select></div>",n+='<div class="ur-pro-operator"> <i class="dashicons dashicons-arrow-right-alt"></i> </div>',n+='<div class="ur-pro-value">',n+='<input name="user_registration_form_value['+i+']" class="ur_pro_external_field_name" placeholder="Enter Field Key" type="text" />',n+="</div>",n+='<span class="add">',n+='<i class="dashicons dashicons-plus"></i>',n+="</span>",n+='<span class="remove">',n+='<i class="dashicons dashicons-minus"></i>',n+="</span></li>",e(this).closest(".ur-pro-field-mapping-box").append(n),e(this).closest(".ur-pro-field-mapping-box").attr("data-last-key",i)}),e(document).on("click",".ur-pro-external-field-map-group .remove",function(){e(".ur-pro-field-mapping-box").find(".ur-pro-external-field-map-group").length>1&&e(this).parent().remove()}),e(document).on("change",".ur_pro_db_table",function(){$table=e(this).val(),e(".ur-spinner").remove(),t.retrive_db_table_columns($table)}),e(document).on("click",".ur-license-expiry-notice .notice-dismiss",function(){var i=e(this);t.get_license_expiry_count(i)})})},initalize_whitelist_domain_settings:function(){e(document).ready(function(){var i=e("#user_registration_form_setting_enable_whitelist_domain"),n=e("#user_registration_form_setting_whitelist_domain_field"),r=e("#user_registration_form_setting_domain_restriction_settings_field");t.settings_fields_toggler(i,n),t.settings_fields_toggler(i,r),i.on("change",function(){t.settings_fields_toggler(e(this),n),t.settings_fields_toggler(e(this),r)})})},initalize_form_reset_settings:function(){e(document).ready(function(){var i=e("#user_registration_form_setting_enable_reset_button"),n=e("#user_registration_form_setting_form_reset_class_field"),r=e("#user_registration_form_setting_form_reset_label_field");t.settings_fields_toggler(i,n),t.settings_fields_toggler(i,r),i.on("change",function(){t.settings_fields_toggler(e(this),n),t.settings_fields_toggler(e(this),r)})})},initalize_blacklist_words_form_settings:function(){e("#user_registration_form_setting_enable_blacklist_words").is(":checked")?(e("#user_registration_form_setting_enable_blacklist_words").closest("#user_registration_form_setting_enable_blacklist_words_field").siblings("#user_registration_form_setting_blacklisted_words_settings_field").show(),e("#user_registration_form_setting_enable_blacklist_words").closest("#user_registration_form_setting_enable_blacklist_words_field").siblings("#user_registration_form_setting_blacklisted_words_field_settings_field").show()):(e("#user_registration_form_setting_enable_blacklist_words").closest("#user_registration_form_setting_enable_blacklist_words_field").siblings("#user_registration_form_setting_blacklisted_words_settings_field").hide(),e("#user_registration_form_setting_enable_blacklist_words").closest("#user_registration_form_setting_enable_blacklist_words_field").siblings("#user_registration_form_setting_blacklisted_words_field_settings_field").hide())},initalize_form_auto_password_generation_settings:function(){e(document).ready(function(){var i=e("#user_registration_pro_auto_password_activate"),n=e("#user_registration_pro_auto_generated_password_length_field");t.settings_fields_toggler(i,n),i.on("change",function(){t.settings_fields_toggler(e(this),n)})})},initialize_conditional_logic_settings:function(){e(document).on("focus",".ur-conditional-wrapper .ur_conditional_field",function(){t.replaceFormFields(e(this))}),e(document).on("change",".ur-conditional-wrapper .ur_conditional_field",function(){t.replaceFieldValues(".ur-conditional-wrapper",this)}),e(document).find(".ur_use_conditional_logic_wrapper").each(function(){var t=e(this).closest(".ur_conditional_logic_container");e(this).find("#ur_use_conditional_logic").is(":checked")?t.find(".ur_conditional_logic_wrapper").show():t.find(".ur_conditional_logic_wrapper").hide()}),e(document).on("change","#ur_use_conditional_logic",function(){var t=e(this).closest(".ur_conditional_logic_container");e(this).is(":checked")?t.find(".ur_conditional_logic_wrapper").show():t.find(".ur_conditional_logic_wrapper").hide()})},hide_show_external_table_selection:function(){$selected_option=e(".ur-pro-db-table-section").val(),"external_table"===$selected_option?(t.init_all_tooltips(),e(".ur-pro-external-field-table-column-selection").show()):(e(".ur_pro_db_table").val(user_registration_pro_admin_script_data.ur_pro_db_prefix+"usermeta"),e(".ur_pro_user_id_db_column").val(""),e(".ur_pro_field_key_db_column").val(""),e(".ur_pro_field_value_db_column").val(""),e(".ur-pro-external-field-table-column-selection").hide())},hide_show_external_fields_mapping:function(){if(e("#user_registration_enable_external_fields_mapping").is(":checked"))if(0===e(".ur-pro-fields-mapping-container").length){var i=e(user_registration_pro_admin_script_data.ur_pro_external_fields_mapping_output),n=i.find(".ur-pro-field-map-select"),r='<option value="">-- Select Field --</option>'+t.get_fields_list();n.each(function(){var t=e(this).val();e(this).html(r),e(this).val(t),e(this).find('option[value="'+t+'"]').prop("selected",!0)}),e("#user_registration_enable_external_fields_mapping_field").after(i),t.hide_show_external_table_selection()}else e(".ur-pro-fields-mapping-container").show(),t.hide_show_external_table_selection();else e(".ur-pro-fields-mapping-container").hide()},get_fields_list:function(){var t="";return e(".ur-grid-lists .ur-selected-item .ur-general-setting").each(function(){var i=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text(),n=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key");if("section_title"!=n&&"html"!=n&&"wysiwyg"!=n&&"billing_address_title"!=n&&"shipping_address_title"!=n){var r=e(this).find("[data-field='field_name']").val();void 0!==r&&(t+='<option value="'+r+'" data-type="'+n+'">'+i+"</option>")}}),t},settings_fields_toggler:function(e,t){e.is(":checked")?t.show():t.hide()},replaceFieldValues:function(t,i){var n=e("option:selected",i).attr("data-type"),r=e("option:selected",i).val(),s=e(i).closest(t).find(".ur-conditional-input"),a=s.attr("name"),o=s.attr("class");if("checkbox"==n||"radio"==n||"select"==n||"country"==n||"billing_country"==n||"shipping_country"==n||"select2"==n||"multi_select2"==n||"multi_choice"==n||"multiple_choice"==n||"subscription_plan"==n){if("select"==n||"select2"==n||"multi_select2"==n)var l=e('.ur-selected-inputs .ur-selected-item .ur-general-setting-field-name input[value="'+r+'"]').closest(".ur-selected-item").find(".ur-field option").map(function(){return e(this).val()});else if("country"==n||"billing_country"==n||"shipping_country"==n)e('.ur-selected-inputs .ur-selected-item .ur-general-setting-field-name input[value="'+r+'"]').closest(".ur-selected-item").find(".ur-field option").map(function(){return e(this).val()}),e('.ur-selected-inputs .ur-selected-item .ur-general-setting-field-name input[value="'+r+'"]').closest(".ur-selected-item").find(".ur-field option").map(function(){return e(this).text()});else l=e('.ur-selected-inputs .ur-selected-item .ur-general-setting-field-name input[value="'+r+'"]').closest(".ur-selected-item").find(".ur-field input").map(function(){return e(this).val()});var _="<option value>--select--</option>";if("country"==n||"billing_country"==n||"shipping_country"==n){var d=e('.ur-general-setting-field-name input[value="'+r+'"').closest(".ur-selected-item").find(".ur-advance-selected_countries select option:selected"),c=[];e(this).find(".urcl-value select").html('<option value="">--select--</option>'),d.each(function(){var t=e(this).val(),i=e(this).text();c.push('<option value="'+t+'">'+i+"</option>")}),_=c.join("")}else 1==l.length&&""===l[0]?_='<option value="1">'+urcl_data.checkbox_checked+"</option>":e(l).each(function(e,t){_=_+'<option value="'+t+'">'+t+"</option>"});s.replaceWith('<select name="'+a+'" class="'+o+'">'+_+"</select>")}else s.replaceWith('<input type="text" name="'+a+'" class="'+o+'">')},retrive_db_table_columns:function(t){var i={action:"user_registration_pro_get_db_columns_by_table",security:user_registration_pro_admin_script_data.ur_pro_get_db_columns_by_table,table:t};e(".user_registration_user_id_db_column_label").append('<span class="ur-spinner"></span>'),e(".user_registration_field_key_db_column_label").append('<span class="ur-spinner"></span>'),e(".user_registration_field_value_db_column_label").append('<span class="ur-spinner"></span>'),e.ajax({url:user_registration_pro_admin_script_data.ajax_url,data:i,type:"POST",success:function(t){if(t.success&&"undefined"!=typeof t.data.columns){var i=JSON.parse(t.data.columns);e(".ur_pro_user_id_db_column option").remove(),e(".ur_pro_field_key_db_column option").remove(),e(".ur_pro_field_value_db_column option").remove(),e(".ur_pro_user_id_db_column").append(e("<option>",{value:"",text:"-- Select Column for User ID --"})),e(".ur_pro_field_key_db_column").append(e("<option>",{value:"",text:"-- Select Column for Field Key --"})),e(".ur_pro_field_value_db_column").append(e("<option>",{value:"",text:"-- Select Column for Field Value --  "}));e.each(i,function(t,i){'<option value="'+i+'">'+i+"</option>",e(".ur_pro_user_id_db_column").append(e("<option>",{value:i,text:i})),e(".ur_pro_field_key_db_column").append(e("<option>",{value:i,text:i})),e(".ur_pro_field_value_db_column").append(e("<option>",{value:i,text:i}))})}e(".ur-spinner").remove()}})},get_license_expiry_count:function(t){var i={action:"user_registration_pro_get_license_expiry_count",security:user_registration_pro_admin_script_data.ur_pro_get_license_expiry_count};e.ajax({url:user_registration_pro_admin_script_data.ajax_url,data:i,type:"POST"})},save_external_mapping_settings:function(){var t=[],i=e(".ur-pro-field-mapping-wrap");return e.each(i,function(){var i=e(this).find(".ur-pro-external-field-map-group"),n=[],r=[];e.each(i,function(){var t={ur_field:e(this).find(".ur-pro-field-map-select").val(),external_field:e(this).find(".ur_pro_external_field_name").val()};r.push(t)}),n.push(r);var s={db_table:e(".ur_pro_db_table").val(),user_id_db_column:e(".ur_pro_user_id_db_column").val(),field_key_db_column:e(".ur_pro_field_key_db_column").val(),field_value_db_column:e(".ur_pro_field_value_db_column").val(),mapped_fields:n};t.push(s)}),t},initialize_extension_page:function(){e(".ur_addons_wrap").find(".install-now").on("click",function(t){var i=e(this),n={action:"user_registration_pro_extension_install",security:user_registration_pro_admin_script_data.ur_pro_install_extension,slug:i.data("slug"),name:i.data("name")};t.preventDefault(),i.text("Installing..."),i.append('<span class="ur-spinner"></span>'),e.ajax({url:user_registration_pro_admin_script_data.ajax_url,data:n,type:"POST",success:function(t){var n='<div class="notice '+(t.success?"notice-success":"notice-error")+'"><p>'+t.message+"</p></div>";e(n).insertBefore(i.closest(".ur_addons_wrap").find(".subsubsub")),t.success?(i.text("Installed"),t.activateUrl?(i.text("Activate"),i.removeClass("install-now").addClass("activate-now button-primary").attr("href",t.activateUrl),i.closest(".ur-plugin-card-bottom").find(".status-label").removeClass("status-install-now").addClass("status-inactive").text("Inactive")):t.deActivateUrl&&(i.text("Deactivate"),i.removeClass("install-now").addClass("deactivate-now button-danger").attr("href",t.deActivateUrl),i.closest(".ur-plugin-card-bottom").find(".status-label").removeClass("status-install-now").addClass("status-inactive").text("Inactive"))):i.text(user_registration_pro_admin_script_data.ur_pro_extension_installed_failed_text).prop("disabled",!0),e(".ur-spinner").remove(),i.off("click")}})})},manage_tooltip_fields:function(){e('input[data-field="tooltip"]').each(function(){e(this).is(":checked")?(e(this).closest(".ur-selected-item").find(".ur-label").find("label").append('<span class="ur-portal-tooltip"></span>'),e(this).closest(".ur-toggle-content").find(".ur-general-setting-tooltip-message").show(500)):e(this).closest(".ur-toggle-content").find(".ur-general-setting-tooltip-message").hide(500),e(document).on("click",".ur-selected-item",function(i){i.stopImmediatePropagation();var n=e(".ur-general-setting-field");e.each(n,function(){var i=e(this);switch(i.attr("data-field")){case"tooltip":i.on("change",function(){t.trigger_general_setting_tooltip(i)});break;case"tooltip_message":i.on("input",function(){t.trigger_general_setting_tooltip_message(i)})}})})})},trigger_general_setting_tooltip:function(t){var i=e(".ur-selected-item.ur-item-active");t.closest("#ur-setting-form").find("[data-field='field_name']").val()===i.find("[data-field='field_name']").val()&&(i.find(".ur-general-setting-block").find('input[data-field="'+t.attr("data-field")+'"]').prop("checked",t.is(":checked")),i.find(".ur-label").find(".ur-portal-tooltip").length>0&&i.find(".ur-label").find(".ur-portal-tooltip").remove(),t.is(":checked")?(i.find(".ur-label").find("label").append('<span class="ur-portal-tooltip"></span>'),t.closest(".ur-toggle-content").find(".ur-general-setting-tooltip-message").show(500)):(i.find(".ur-label").find("label").find("span.ur-portal-tooltip").remove(),t.closest(".ur-toggle-content").find(".ur-general-setting-tooltip-message").hide(500)))},trigger_general_setting_tooltip_message:function(t){e(".ur-selected-item.ur-item-active").find(".ur-general-setting-block").find('textarea[data-field="'+t.attr("data-field")+'"]').val(t.val())},init_export_custom_fields:function(){e("select.ur-input.forms-list").on("change",function(){var t=e('<span class="ur-spinner"></span>');e(".ur-export-custom-fields > p").append(t);var i=e(this).val();""!=i?e.ajax({url:user_registration_pro_admin_script_data.ajax_url,data:{action:"user_registration_pro_get_form_fields_list_by_form_id",form_id:i,security:user_registration_pro_admin_script_data.ur_pro_get_form_fields_by_form_id},type:"post",success:function(i){e(".ur-export-custom-fields").show(),e(".ur-custom-fields-input").html("");var n=JSON.parse(i.data.form_field_list);option="",e.each(n,function(e,t){option+='<option class="ur-field-option" value="'+e+'">'+t+"</option>"}),e(".ur-custom-fields-input").html(option),e(".ur_export_csv_additional_fields_dict").val(i.data.form_field_list),t.remove()}}):(e(".ur-export-custom-fields").hide(),t.remove())}),e(".ur-export-custom-fields").hide(),e(function(){flatpickr("#date_range",{mode:"range",dateFormat:"Y-m-d",maxDate:"today",onChange:function(t){if(2==t.length){var i=t[0],n=i.toLocaleString("default",{year:"numeric"})+"-"+i.toLocaleString("default",{month:"2-digit"})+"-"+i.toLocaleString("default",{day:"2-digit"}),r=t[1],s=r.toLocaleString("default",{year:"numeric"})+"-"+r.toLocaleString("default",{month:"2-digit"})+"-"+r.toLocaleString("default",{day:"2-digit"});e("#from_date").val(n),e("#to_date").val(s)}}})})},init_render_dynamic_form_fields:function(){e(document).on("focus",".ur_pro_fields_wrapper .column-form-fields select",function(){t.replaceFormFields(e(this))})},replaceFormFields:function(i){var n={};e(".ur-grid-lists .ur-selected-item .ur-admin-template").each(function(){var t=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-label label").text(),i=e(this).closest(".ur-selected-item").find(" .ur-admin-template .ur-field").data("field-key"),r=e(this).parent().find(".ur-general-setting-block").find("input[data-field='field_name'").val();"section_title"!=i&&"html"!=i&&"wysiwyg"!=i&&"billing_address_title"!=i&&"shipping_address_title"!=i&&"stripe_gateway"!=i&&"profile_picture"!=i&&"file"!=i&&"user_confirm_password"!=i&&"user_pass"!=i&&"signature"!=i&&void 0!==i&&(n[r+"."+i]=t)});var r=i.val();return i.empty(),i.html("<option value>Ignore this field</option>"),e.each(n,function(t,n){var r=t.substring(0,t.indexOf(".")),s=t.slice(t.indexOf(".")+1);i.append(e("<option data-type='"+s+"' data-lable='"+n+"'></option>").attr("value",r).text(n))}),i.find("option[value='"+r+"']").attr("selected","selected"),i.on("change",function(){selectedOption=e(this).val(),t.replaceFormFields(e(this))}),n},init_hide_show_redirection_settings:function(){this.hide_show_redirection_options(),e("#user_registration_form_setting_redirect_after_registration").on("change",this.hide_show_redirection_options),this.hide_show_redirection_messages(),e('#user_registration_form_setting_redirect_after_registration, select[data-id="user_registration_form_setting_login_options"], input[data-id="user_registration_enable_paypal_standard"], input[data-id="user_registration_form_setting_enable_conditional_redirection"]').on("change",this.hide_show_redirection_messages)},hide_show_redirection_options:function(){var t=e("#user_registration_form_setting_redirect_after_registration"),i=t.find(":selected"),n=e("#user_registration_form_setting_role_based_redirection_field").slideUp(800);t.length&&"role-based-redirection"===i.val()&&n.slideDown(800)},hide_show_redirection_messages:function(){var t=e("#user_registration_form_setting_redirect_after_registration"),i=(e('select[data-id="user_registration_form_setting_login_options"]'),e('input[data-id="user_registration_enable_paypal_standard"]').is(":checked")),n=e('input[data-id="user_registration_form_setting_enable_conditional_redirection"]'),r=!1;if(n.length&&(r=n.is(":checked")),("no-redirection"!==t.val()||r)&&i){if(!t.parent().find("#user-registration-redirection-message").length){var s=e('<div class="user-registration-form-setting-info" id="user-registration-redirection-message">Warning: Redirection options will not work with Paypal payment enabled.</div>');t.before(s)}}else{var a=t.parent().find("#user-registration-redirection-message");a.length&&a.remove()}},init_hide_show_role_based_redirection_settings:function(){var t=e("#user_registration_pro_role_based_redirection").closest(".user-registration-global-settings").next();!0===e("#user_registration_pro_role_based_redirection").prop("checked")&&e(t).show(),e("#user_registration_pro_role_based_redirection").on("change",function(){e(t).toggle()})},initalize_email_blocking_settings:function(){e(document).ready(function(){var i=e("#user_registration_form_setting_email_blocking"),n=e("#user_registration_form_setting_email_black_list_field");t.settings_fields_toggler(i,n),i.on("change",function(){t.settings_fields_toggler(e(this),n)})})},init_slot_booking:function(){e(document).on("focus",".ur_advance_setting.ur-settings-date-target_field",function(){var i=e(".ur-selected-inputs").find(".ur-selected-item .ur-general-setting-date");t.slotbooking_target_field_list(e(this),i)})},slotbooking_target_field_list:function(t,i){var n='<option value=""> -- Select target field -- </option>';e.each(i,function(t,i){var r=e(i).find(".ur-toggle-content"),s=e(r).find(".ur-general-setting-label input").val(),a=e(r).find(".ur-general-setting-field-name input").val();n+="<option value="+a+">"+s+"</option>"}),e(t).html(n);e(".ur-registered-from").find(".ur-item-active").find(".ur-advance-setting-block").find(".ur-advance-target_date_field").find(".ur-settings-date-target_field").html(n)},image_choice_uploader:function(){e("body").on("click",".ur-media-btn",function(t){t.preventDefault();var i=e(this),n=wp.media({title:"Upload image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).on("select",function(){var t=n.state().get("selection").first().toJSON();if(Object.keys(t).length){i.closest("li").find(".ur-thumbnail-image img").attr("src",t.url),i.closest("li").find("input.ur-type-image-choice").val(t.url);var r=e(".ur-selected-item.ur-item-active"),s=i.closest("li").index();r.find(".ur-general-setting-block li:nth("+s+') input[type="hidden"][data-field-name="image-choice"]').val(t.url),r.find(".ur-general-setting-block li:nth("+s+') input[type="hidden"][data-field-name="multiple_choice"]').val(t.url),r.find(".ur-admin-template .ur-field label:nth("+s+") img").attr("src",t.url),r.find(".ur-general-setting-block li:nth("+s+") .ur-thumbnail-image img").attr("src",t.url),r.find(".ur-general-setting-block li:nth("+s+") .ur-image-choice-wrapper .ur-remove-btn").show(),i.closest(".ur-image-choice-wrapper").find(".ur-remove-btn").show(),i.hide()}});n.open()}),e("body").on("click",".ur-remove-btn",function(t){t.preventDefault();var i=e(this);i.closest(".ur-image-choice-wrapper").find(".ur-type-image-choice").val("");var n=e(".ur-selected-item.ur-item-active"),r=i.closest("li").index();n.find(".ur-general-setting-block li:nth("+r+') input[type="hidden"][data-field-name="image-choice"]').val(""),n.find(".ur-admin-template .ur-field label:nth("+r+") img").attr("src",user_registration_pro_admin_script_data.ur_placeholder),i.closest(".ur-image-choice-wrapper").find(".ur-thumbnail-image img").attr("src",""),i.closest(".ur-image-choice-wrapper").find(".ur-media-btn").show(),i.closest(".ur-image-choice-wrapper").find(".ur-remove-btn").hide()})},trigger_image_captcha_settings:function(){e(document).on("keyup",".ur-type-captcha-icon-tag",function(){e(this).closest(".ur-general-setting").hasClass("ur-general-setting-image-captcha-options")&&t.render_image_captcha_tag(e(this))}),e(document).on("change",".ur-captcha-icon-radio",function(){e(this).closest(".ur-general-setting").hasClass("ur-general-setting-image-captcha-options")&&t.render_image_captcha_radio(e(this))})},disable_users:function(){e("body").on("click",".disable-user-link",function(){var t=e(this).attr("id").split("-").pop(),i=e(this).data("nonce"),n="<span>"+user_registration_pro_admin_script_data.disable_user_popup_content+"</span>";n+='<form id="disable-user-form-'+t+'" class="disable-users-form" style="text-align:center">',n+='<input type="hidden" name="action" value="user_registration_pro_disable_user">',n+='<input type="hidden" name="user_id" value="'+t+'">',n+='<input type="hidden" name="_wpnonce" value="'+i+'">',n+='<input type="number" name="duration_value" min="1" placeholder="'+user_registration_pro_admin_script_data.disable_user_placeholder+'" style="margin-right:10px;">',n+='<select name="duration_unit" style="margin-right:10px;"><option value="days">Day(s)</option><option value="weeks">Week(s)</option><option value="months">Month(s)</option><option value="years">Year(s)</option></select>',n+="</form>",swal.fire({title:'<i class="dashicons dashicons-warning"></i><span class="user-registration-swal2-modal__title" >'+user_registration_pro_admin_script_data.disable_user_title+"</span>",html:n,confirmButtonText:user_registration_pro_admin_script_data.disable,confirmButtonColor:"#3085d6",showConfirmButton:!0,showCancelButton:!0,cancelButtonText:user_registration_pro_admin_script_data.cancel,customClass:{container:"user-registration-swal2-container"},customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered",focusConfirm:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(n){var r=Swal.getPopup().querySelector('input[name="duration_value"]').value,s=Swal.getPopup().querySelector('select[name="duration_unit"]').value;r&&s?(e.ajax({type:"get",url:user_registration_pro_admin_script_data.ajax_url,data:{action:"user_registration_pro_disable_user",user_id:t,nonce:i,duration_value:r,duration_unit:s},success:function(e){e.success?Swal.fire({icon:"success",title:'<span class="user-registration-swal2-modal__title" >'+user_registration_pro_admin_script_data.disable_user_success_message_title+"</span>",customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered",html:user_registration_pro_admin_script_data.disable_user_success_message}).then(function(){window.location.href=user_registration_pro_admin_script_data.after_disable_redirect_url}):Swal.fire({icon:"error",title:'<span class="user-registration-swal2-modal__title" >'+user_registration_pro_admin_script_data.disable_user_error_message_title+"</span>",customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered",html:e.data.message+" "+user_registration_pro_admin_script_data.disable_user_error_message})},error:function(e){Swal.fire({icon:"error",title:'<span class="user-registration-swal2-modal__title" >'+user_registration_pro_admin_script_data.disable_user_error_message_title+"</span>",customClass:"user-registration-swal2-modal user-registration-swal2-modal--centered",html:e.data.message+" "+user_registration_pro_admin_script_data.disable_user_error_message})}}),Swal.close()):(Swal.showValidationMessage("Please enter duration value and unit."),Swal.hideLoading(),e(".swal2-actions").find("button").prop("disabled",!1))})}})})},misc_settings:function(){function t(){e("#user_registration_delete_user_schedular_duration").closest(".user-registration-global-settings").hide(),e("#user_registration_delete_user_schedular_status").closest(".user-registration-global-settings").hide(),e("#user_registration_delete_user_schedular_roles").closest(".user-registration-global-settings").hide()}function i(){e("#user_registration_delete_user_schedular_duration").closest(".user-registration-global-settings").show(),e("#user_registration_delete_user_schedular_status").closest(".user-registration-global-settings").show(),e("#user_registration_delete_user_schedular_roles").closest(".user-registration-global-settings").show()}e("#user_registration_enable_delete_user_schedular").is(":checked")?i():t(),e(document).on("change","#user_registration_enable_delete_user_schedular",function(){e(this).is(":checked")?i():t()})}};e("#user_registration_enable_privacy_tab").is(":checked")||e(".privacy-tab-settings").closest(".user-registration-global-settings").hide(),e("#user_registration_enable_privacy_tab").on("change",function(){e(".privacy-tab-settings").closest(".user-registration-global-settings").toggle()}),""==e("#user_registration_auto_logout_inactivity_time").val()&&(e("#user_registration_timeout_countdown_inactive_period").parent().parent().hide(),e("#user_registration_role_based_inactivity").parent().parent().hide()),e(document).on("change","#user_registration_auto_logout_inactivity_time",function(){e("#user_registration_timeout_countdown_inactive_period").parent().parent().show(),e("#user_registration_role_based_inactivity").parent().parent().show(),""==e(this).val()&&(e("#user_registration_timeout_countdown_inactive_period").parent().parent().hide(),e("#user_registration_role_based_inactivity").parent().parent().hide())}),""==e("#user_registration_pro_general_post_submission_settings").val()&&e("#user_registration_pro_general_post_submission_profile_update").closest("div.user-registration-global-settings").hide(),e("#user_registration_pro_general_post_submission_settings").on("keyup",function(){""==e("#user_registration_pro_general_post_submission_settings").val()?e("#user_registration_pro_general_post_submission_profile_update").closest("div.user-registration-global-settings").hide():e("#user_registration_pro_general_post_submission_profile_update").closest("div.user-registration-global-settings").show()}),e(document).ready(function(){t.init()})});